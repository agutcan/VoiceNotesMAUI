<?xml version="1.0" encoding="utf-8" ?>

<!-- PÃ¡gina para aÃ±adir una nueva nota -->
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="VoiceNotesMAUI.MVVM.Views.AddNotePage"
             BackgroundColor="{StaticResource ColorFondo}">

    <!-- Permite scroll si el contenido no cabe en pantalla -->
    <ScrollView>
        <!-- Contenedor principal en columna -->
        <VerticalStackLayout Padding="30" Spacing="25">

            <!-- Cabecera con botÃ³n volver + tÃ­tulo -->
            <Grid ColumnDefinitions="Auto, *"
                  ColumnSpacing="20"
                  VerticalOptions="Center">

                <!-- BotÃ³n volver con estilo circular -->
                <Border Grid.Column="0"
                        HeightRequest="45"
                        WidthRequest="45"
                        StrokeThickness="0"
                        BackgroundColor="{StaticResource ColorTarjeta}">

                    <!-- Forma redondeada -->
                    <Border.StrokeShape>
                        <RoundRectangle CornerRadius="22.5" />
                    </Border.StrokeShape>

                    <!-- Sombra del botÃ³n -->
                    <Border.Shadow>
                        <Shadow Offset="0,3"
                                Radius="6"
                                Opacity="0.15"
                                Brush="Black" />
                    </Border.Shadow>

                    <!-- Grid interno para superponer icono y botÃ³n invisible -->
                    <Grid HorizontalOptions="Fill"
                          VerticalOptions="Fill">

                        <!-- Icono de flecha -->
                        <Label Text="â†"
                               FontSize="24"
                               TextColor="{StaticResource ColorPrimario}"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"
                               Margin="0,0,0,3" />

                        <!-- BotÃ³n transparente para capturar el click -->
                        <ImageButton BackgroundColor="Transparent"
                                     Clicked="OnVolverClicked"
                                     HorizontalOptions="Fill"
                                     VerticalOptions="Fill" />
                    </Grid>
                </Border>

                <!-- TÃ­tulos de la pÃ¡gina -->
                <VerticalStackLayout Grid.Column="1">
                    <!-- SubtÃ­tulo -->
                    <Label Text="âœï¸ NUEVA"
                           FontSize="12"
                           TextColor="{StaticResource ColorPrimario}"
                           FontAttributes="Bold"
                           CharacterSpacing="2" />

                    <!-- TÃ­tulo principal -->
                    <Label Text="Escribir Nota"
                           FontSize="32"
                           FontAttributes="Bold"
                           TextColor="{StaticResource ColorTexto}" />
                </VerticalStackLayout>
            </Grid>

            <!-- Tarjeta que contiene el editor de texto -->
            <Border StrokeThickness="0"
                    BackgroundColor="{StaticResource ColorTarjeta}">

                <!-- Bordes redondeados -->
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20" />
                </Border.StrokeShape>

                <!-- Sombra de la tarjeta -->
                <Border.Shadow>
                    <Shadow Offset="0,10"
                            Radius="20"
                            Opacity="0.1"
                            Brush="Black" />
                </Border.Shadow>

                <!-- Contenido interno de la tarjeta -->
                <VerticalStackLayout Padding="20"
                                     Spacing="15">

                    <!-- Editor de texto enlazado al ViewModel -->
                    <Editor Text="{Binding TextoNota}"
                            Placeholder="Escribe aquÃ­ tus ideas..."
                            FontSize="18"
                            TextColor="{StaticResource ColorTexto}"
                            AutoSize="TextChanges"
                            MinimumHeightRequest="250" />

                    <!-- Separador visual -->
                    <BoxView HeightRequest="1"
                             Color="#F0F0F0" />

                    <!-- Contador de caracteres -->
                    <HorizontalStackLayout HorizontalOptions="End"
                                           Spacing="5">

                        <!-- NÃºmero de caracteres -->
                        <Label Text="{Binding LongitudTexto}"
                               FontAttributes="Bold"
                               TextColor="{StaticResource ColorPrimario}" />

                        <!-- Texto fijo -->
                        <Label Text="caracteres"
                               TextColor="Gray" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- BotÃ³n para guardar la nota -->
            <Button Text="ðŸ’¾ Guardar Nota"
                    FontSize="18"
                    BackgroundColor="{StaticResource ColorExito}"
                    TextColor="White"
                    HeightRequest="60"
                    CornerRadius="15"
                    Clicked="OnGuardarNota">

                <!-- Sombra del botÃ³n -->
                <Button.Shadow>
                    <Shadow Offset="0,5"
                            Radius="12"
                            Opacity="0.2"
                            Brush="Black" />
                </Button.Shadow>
            </Button>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
